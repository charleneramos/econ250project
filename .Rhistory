'RU', #Russian Federation
'CL', #Chile
'VE', #Venezuela, RB
'LY', #Libya
'BH', #Bahrain
'BN', #Brunei Darussalam
'TT', #Trinidad and Tobago
'SA', #Saudi Arabia
'OM', #Oman
'AE', #United Arab Emirates
'QA', #Qatar
'NO')),
df <- WDI(country = c('CD', #Congo, Dem. Rep.
'LR', #Liberia
'NE', #Niger
'GN', #Guinea
'ML', #Mali,
'TD', #Chad
'MR', #Mauritania
'LA', #Lao PDR
'ZM', #Zambia
'VN', #Vietnam
'YE', #Yemen
'NG', #Nigeria
'CM', #Cameroon
'PG', #Papua New Guinea
'SD', #Sudan
'UZ', #Uzbekistan
'CI', #Cote d'Ivoire
'BO', #Bolivia
'MN', #Mongolia
'CG', #Congo, Rep.
'IQ', #Iraq
'ID', #Indonesia
'TL', #Timor-Leste
'SY', #Syrian Arab Republic
'GY', #Guyana
'TM', #Turkmenistan
'AO', #Angola
'GA', #Gabon
'GQ', #Equatorial Guinea
'SL', #Sierra Leone
'AF', #Afghanistan
'MG', #Madagascar
'MZ', #Mozambique
'CF', #Central African Republic
'UG', #Uganda
'TZ', #Tanzania
'TG', #Togo
'KG', #Kyrgyz Republic
'ST', #Sao Tome and Principe
'GH', #Ghana
'GT', #Guatemala
'EC', #Ecuador
'AL', #Albania
'DZ', #Algeria
'IR', #Iran, Islamic Rep.
'PE', #Peru
'AZ', #Azerbaijan
'BW', #Botswana
'KZ', #Kazakhstan
'SR', #Suriname
'MX', #Mexico
'RU', #Russian Federation
'CL', #Chile
'VE', #Venezuela, RB
'LY', #Libya
'BH', #Bahrain
'BN', #Brunei Darussalam
'TT', #Trinidad and Tobago
'SA', #Saudi Arabia
'OM', #Oman
'AE', #United Arab Emirates
'QA', #Qatar
'NO'),
indicator = c('C1.7', #Gross national income (in USD)
'C1.8', #Gross national income per capita (in USD)
'NY.ADJ.DMIN.CD', #Adjusted savings: mineral depletion (current US$)
'NY.ADJ.DRES.GN.ZS', #Adjusted savings: natural resources depletion (% of GNI)
'SE.PRM.UNER', #Children out of school, primary
'SE.PRM.UNER.FE', #Children out of school, primary, female
'SE.PRM.UNER.MA', #Children out of school, primary, male
'FP.CPI.TOTL', #Consumer price index (2010 = 100)
'CC.EST', #Control of Corruption: Estimate
'BN.KLT.DINV.CD', #Foreign direct investment, net inflows (BoP, current US$
'GE.EST', #Government Effectiveness: Estimate
'SL.TLF.TOTL.IN', #Labor force, total
'SL.TLF.TOTL.MA.IN', #Labor force, male
'SL.TLF.TOTL.FE.IN', #Labor force, female,
'DC.DAC.USAL.CD', #Net bilateral aid flows from DAC donors, United States (current US$)
'DT.ODA.OATL.CD', #Net official aid received (current US$)
'DT.ODA.ALLD.CD', #Net official development assistance and official aid received (current US$)
'IC.BUS.NREG', #New businesses registered (number)
'PV.EST', #Political Stability and Absence of Violence/Terrorism: Estimate
'SP.POP.TOTL', #Population, total
'SP.POP.TOTL.MA.IN', #Population, male
'SP.POP.TOTL.FE.IN', #Population, female
'NV.IND.MANF.CD', #Manufacturing, value added (current US$)
'NE.EXP.GNFS.CD', #Exports of goods and services (current US$)
))
df <- WDI(country = c('CD', #Congo, Dem. Rep.
'LR', #Liberia
'NE', #Niger
'GN', #Guinea
'ML', #Mali,
'TD', #Chad
'MR', #Mauritania
'LA', #Lao PDR
'ZM', #Zambia
'VN', #Vietnam
'YE', #Yemen
'NG', #Nigeria
'CM', #Cameroon
'PG', #Papua New Guinea
'SD', #Sudan
'UZ', #Uzbekistan
'CI', #Cote d'Ivoire
'BO', #Bolivia
'MN', #Mongolia
'CG', #Congo, Rep.
'IQ', #Iraq
'ID', #Indonesia
'TL', #Timor-Leste
'SY', #Syrian Arab Republic
'GY', #Guyana
'TM', #Turkmenistan
'AO', #Angola
'GA', #Gabon
'GQ', #Equatorial Guinea
'SL', #Sierra Leone
'AF', #Afghanistan
'MG', #Madagascar
'MZ', #Mozambique
'CF', #Central African Republic
'UG', #Uganda
'TZ', #Tanzania
'TG', #Togo
'KG', #Kyrgyz Republic
'ST', #Sao Tome and Principe
'GH', #Ghana
'GT', #Guatemala
'EC', #Ecuador
'AL', #Albania
'DZ', #Algeria
'IR', #Iran, Islamic Rep.
'PE', #Peru
'AZ', #Azerbaijan
'BW', #Botswana
'KZ', #Kazakhstan
'SR', #Suriname
'MX', #Mexico
'RU', #Russian Federation
'CL', #Chile
'VE', #Venezuela, RB
'LY', #Libya
'BH', #Bahrain
'BN', #Brunei Darussalam
'TT', #Trinidad and Tobago
'SA', #Saudi Arabia
'OM', #Oman
'AE', #United Arab Emirates
'QA', #Qatar
'NO'),
indicator = c('C1.7', #Gross national income (in USD)
'C1.8', #Gross national income per capita (in USD)
'NY.ADJ.DMIN.CD', #Adjusted savings: mineral depletion (current US$)
'NY.ADJ.DRES.GN.ZS', #Adjusted savings: natural resources depletion (% of GNI)
'SE.PRM.UNER', #Children out of school, primary
'SE.PRM.UNER.FE', #Children out of school, primary, female
'SE.PRM.UNER.MA', #Children out of school, primary, male
'FP.CPI.TOTL', #Consumer price index (2010 = 100)
'CC.EST', #Control of Corruption: Estimate
'BN.KLT.DINV.CD', #Foreign direct investment, net inflows (BoP, current US$
'GE.EST', #Government Effectiveness: Estimate
'SL.TLF.TOTL.IN', #Labor force, total
'SL.TLF.TOTL.MA.IN', #Labor force, male
'SL.TLF.TOTL.FE.IN', #Labor force, female,
'DC.DAC.USAL.CD', #Net bilateral aid flows from DAC donors, United States (current US$)
'DT.ODA.OATL.CD', #Net official aid received (current US$)
'DT.ODA.ALLD.CD', #Net official development assistance and official aid received (current US$)
'IC.BUS.NREG', #New businesses registered (number)
'PV.EST', #Political Stability and Absence of Violence/Terrorism: Estimate
'SP.POP.TOTL', #Population, total
'SP.POP.TOTL.MA.IN', #Population, male
'SP.POP.TOTL.FE.IN', #Population, female
'NV.IND.MANF.CD', #Manufacturing, value added (current US$)
'NE.EXP.GNFS.CD' #Exports of goods and services (current US$)
))
df <- WDI(country = c('CD', #Congo, Dem. Rep.
'LR', #Liberia
'NE', #Niger
'GN', #Guinea
'ML', #Mali,
'TD', #Chad
'MR', #Mauritania
'LA', #Lao PDR
'ZM', #Zambia
'VN', #Vietnam
# 'YE', #Yemen
# 'NG', #Nigeria
# 'CM', #Cameroon
# 'PG', #Papua New Guinea
# 'SD', #Sudan
# 'UZ', #Uzbekistan
# 'CI', #Cote d'Ivoire
# 'BO', #Bolivia
# 'MN', #Mongolia
# 'CG', #Congo, Rep.
# 'IQ', #Iraq
# 'ID', #Indonesia
# 'TL', #Timor-Leste
# 'SY', #Syrian Arab Republic
# 'GY', #Guyana
# 'TM', #Turkmenistan
# 'AO', #Angola
# 'GA', #Gabon
# 'GQ', #Equatorial Guinea
# 'SL', #Sierra Leone
# 'AF', #Afghanistan
# 'MG', #Madagascar
# 'MZ', #Mozambique
# 'CF', #Central African Republic
# 'UG', #Uganda
# 'TZ', #Tanzania
# 'TG', #Togo
# 'KG', #Kyrgyz Republic
# 'ST', #Sao Tome and Principe
# 'GH', #Ghana
# 'GT', #Guatemala
# 'EC', #Ecuador
# 'AL', #Albania
# 'DZ', #Algeria
# 'IR', #Iran, Islamic Rep.
# 'PE', #Peru
# 'AZ', #Azerbaijan
# 'BW', #Botswana
# 'KZ', #Kazakhstan
# 'SR', #Suriname
# 'MX', #Mexico
# 'RU', #Russian Federation
# 'CL', #Chile
# 'VE', #Venezuela, RB
# 'LY', #Libya
# 'BH', #Bahrain
# 'BN', #Brunei Darussalam
# 'TT', #Trinidad and Tobago
# 'SA', #Saudi Arabia
# 'OM', #Oman
# 'AE', #United Arab Emirates
'QA', #Qatar
'NO'),
indicator = c('C1.7', #Gross national income (in USD)
'C1.8', #Gross national income per capita (in USD)
'NY.ADJ.DMIN.CD', #Adjusted savings: mineral depletion (current US$)
'NY.ADJ.DRES.GN.ZS', #Adjusted savings: natural resources depletion (% of GNI)
'SE.PRM.UNER', #Children out of school, primary
'SE.PRM.UNER.FE', #Children out of school, primary, female
'SE.PRM.UNER.MA', #Children out of school, primary, male
'FP.CPI.TOTL', #Consumer price index (2010 = 100)
'CC.EST', #Control of Corruption: Estimate
'BN.KLT.DINV.CD', #Foreign direct investment, net inflows (BoP, current US$
'GE.EST', #Government Effectiveness: Estimate
'SL.TLF.TOTL.IN', #Labor force, total
'SL.TLF.TOTL.MA.IN', #Labor force, male
'SL.TLF.TOTL.FE.IN', #Labor force, female,
'DC.DAC.USAL.CD', #Net bilateral aid flows from DAC donors, United States (current US$)
'DT.ODA.OATL.CD', #Net official aid received (current US$)
'DT.ODA.ALLD.CD', #Net official development assistance and official aid received (current US$)
'IC.BUS.NREG', #New businesses registered (number)
'PV.EST', #Political Stability and Absence of Violence/Terrorism: Estimate
'SP.POP.TOTL', #Population, total
'SP.POP.TOTL.MA.IN', #Population, male
'SP.POP.TOTL.FE.IN', #Population, female
'NV.IND.MANF.CD', #Manufacturing, value added (current US$)
'NE.EXP.GNFS.CD' #Exports of goods and services (current US$)
))
source("~/Library/CloudStorage/OneDrive-UCSanDiego/Documents/UC San Diego/02. Coursework/e. Programming/250A (FA25)/02. Code/WDI.R")
git status
setwd("~/Documents/Git/econ250project")
rmarkdown::render(
"/Users/charleneramos/Documents/Git/econ250project/code/vsp_draft.Rmd",
output_format = "pdf_document",
output_dir = "/Users/charleneramos/Documents/Git/econ250project/output/"
)
# install.packages(c("kableExtra","knitr","rmarkdown","tidyverse","tinytex","webshot2"))
# tinytex::install_tinytex()
# ------------------------------- INSTRUCTIONS ------------------------------- #
# 1. Uncomment R chunk labeled data_aid. This cleans and analyzes the
# international aid data. When finish, comment this chunk out again. The PDF
# file won't render otherwise.
# 2. Run R chunk labeled render to generate the PDF table.
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
library(kableExtra)
library(tidyverse)
library(webshot2)
# setwd('/Users/charleneramos/Documents/Git/econ250project')
# fmt <- function(x) formatC(x, format = "f", big.mark = ",", digits = 0)
level_1a <- read_csv('/Users/charleneramos/Documents/Git/econ250project/data/raw/UgandaAIMS_GeocodedResearchRelease_Level1_v1.4.1/data/level_1a.csv')
# locations <- read_csv('data/raw/UgandaAIMS_GeocodedResearchRelease_Level1_v1.4.1/data/locations.csv')
# projects <- read_csv('data/raw/UgandaAIMS_GeocodedResearchRelease_Level1_v1.4.1/data/projects.csv')
transactions <- read_csv('/Users/charleneramos/Documents/Git/econ250project/data/raw/UgandaAIMS_GeocodedResearchRelease_Level1_v1.4.1/data/transactions.csv')
df <- transactions %>%
filter(transaction_value_code == 'D') %>% # filter for disbursement
select(-c('transaction_isodate', 'transaction_currency','transaction_value_code')) # drop unnecessary columns; note USD currency
df <- merge(df, level_1a, by = 'project_id')
# df <- merge(df, projects, by = 'project_id')
# df <- merge(df, locations, by = 'project_id')
df <- df %>%
filter(transactions_end_year >= 2013 & transactions_end_year <= 2017) %>% # filter for years 2013-2017
filter(location_type_code == 'ADM2') %>% # filter for ADM2 locations
distinct() %>%
arrange(project_id) %>%
select(c('project_id', 'project_location_id', everything()))
all_transaction <- df %>%
group_by(transactions_end_year) %>%
summarise(
mean = mean(transaction_value),
sd = sd(transaction_value),
n = n(),
min = min(transaction_value),
max = max(transaction_value)
) %>%
mutate(region = 'All', variable = 'transaction') %>%
rename(year = transactions_end_year) %>%
select(c('variable','region'), everything())
all_total_disbursement<- df %>%
group_by(transactions_end_year) %>%
summarise(
mean = mean(total_disbursements),
sd = sd(total_disbursements),
n = n(),
min = min(total_disbursements),
max = max(total_disbursements)
) %>%
mutate(region = 'All', variable = 'total_disbursement') %>%
rename(year = transactions_end_year) %>%
select(c('variable','region'), everything())
all_even_disbursement<- df %>%
group_by(transactions_end_year) %>%
summarise(
mean = mean(even_split_disbursements),
sd = sd(even_split_disbursements),
n = n(),
min = min(even_split_disbursements),
max = max(even_split_disbursements)
) %>%
mutate(region = 'All', variable = 'even_split_disbursement') %>%
rename(year = transactions_end_year) %>%
select(c('variable','region'), everything())
region_transaction <- df %>%
group_by(transactions_end_year, place_name) %>%
summarise(
mean = mean(transaction_value),
sd = sd(transaction_value),
n = n(),
min = min(transaction_value),
max = max(transaction_value)
) %>%
mutate(variable = 'transaction') %>%
rename(region = place_name, year = transactions_end_year) %>%
select(c('variable','region'), everything()) %>%
arrange(region)
region_total_disbursement <- df %>%
group_by(transactions_end_year, place_name) %>%
summarise(
mean = mean(total_disbursements),
sd = sd(total_disbursements),
n = n(),
min = min(total_disbursements),
max = max(total_disbursements)
) %>%
mutate(variable = 'total_disbursement') %>%
rename(region = place_name, year = transactions_end_year) %>%
select(c('variable','region'), everything()) %>%
arrange(region)
region_even_disbursement <- df %>%
group_by(transactions_end_year, place_name) %>%
summarise(
mean = mean(even_split_disbursements),
sd = sd(even_split_disbursements),
n = n(),
min = min(even_split_disbursements),
max = max(even_split_disbursements)
) %>%
mutate(variable = 'even_split_disbursement') %>%
rename(region = place_name, year = transactions_end_year) %>%
select(c('variable','region'), everything()) %>%
arrange(region)
df_stats <- bind_rows(all_transaction, all_total_disbursement, all_even_disbursement, region_transaction, region_total_disbursement, region_even_disbursement)
df_stats <- df_stats %>%
arrange(variable)
write_csv(df_stats, '/Users/charleneramos/Documents/Git/econ250project/data/int/summary_stats_aid.csv')
df_sum_stat <- df_stats %>%
mutate(across(where(is.numeric), ~ format(.x, big.mark = ",", scientific = FALSE))) %>%
mutate(year = as.numeric(gsub(',', '', year))) %>%
filter(region == 'All') %>%
kbl() %>%                       # <— kableExtra’s wrapper; detects format
kable_styling(full_width = FALSE)
save_kable(df_sum_stat, '/Users/charleneramos/Documents/Git/econ250project/output/summary_stats_aid.html')
webshot('/Users/charleneramos/Documents/Git/econ250project/output/summary_stats_aid.html', '/Users/charleneramos/Documents/Git/econ250project/output/summary_stats_aid.png',
selector = "table",      # crops tightly to the table
zoom = 2,                # higher resolution
vwidth = 2000,           # width of the browser window
vheight = 3000           # height — increase if your table is tall
)
df_stat_mean <- df_stats %>%
group_by(variable, region, year) %>%
mutate(across(where(is.numeric), ~ format(.x, big.mark = ",", scientific = FALSE))) %>%
mutate(year = as.numeric(gsub(',', '', year))) %>%
select(c('variable', 'region', 'year', 'mean', 'sd')) %>%
filter(region == 'All') %>%
mutate(
# format each mean–sd pair as a string
mean_sd = paste0(
mean,
"<br>(",
sd,
")"
)
) %>%
select(variable, region, year, mean_sd) %>%
pivot_wider(
names_from  = year,
values_from = mean_sd
) %>%
select(c('variable', 'region', '2013', '2014', '2015', '2016', '2017')) %>%
kbl(escape = FALSE, align = "lcccc", caption = "Mean (SD) by Year") %>%
kable_styling(full_width = FALSE)
save_kable(df_stat_mean, '/Users/charleneramos/Documents/Git/econ250project/output/summary_mean_aid.html')
webshot('/Users/charleneramos/Documents/Git/econ250project/output/summary_mean_aid.html', '/Users/charleneramos/Documents/Git/econ250project/output/summary_mean_aid.png',
selector = "table",      # crops tightly to the table
zoom = 2,                # higher resolution
vwidth = 2000,           # width of the browser window
vheight = 3000           # height — increase if your table is tall
)
df_stat_mean_region <- df_stats %>%
group_by(region, year) %>%
mutate(across(where(is.numeric), ~ format(.x, big.mark = ",", scientific = FALSE))) %>%
mutate(year = as.numeric(gsub(',', '', year))) %>%
filter(variable == 'even_split_disbursement') %>%
select(c('region', 'year', 'mean', 'sd')) %>%
mutate(
# format each mean–sd pair as a string
mean_sd = paste0(
mean,
"<br>(",
sd,
")"
)
) %>%
select(region, year, mean_sd) %>%
pivot_wider(
names_from  = year,
values_from = mean_sd
) %>%
select(c('region', '2013', '2014', '2015', '2016', '2017')) %>%
kbl(escape = FALSE, align = "lcccc", caption = "Mean (SD) by Year and Region") %>%
kable_styling(full_width = FALSE)
save_kable(df_stat_mean_region, '/Users/charleneramos/Documents/Git/econ250project/output/summary_mean_aid_region.html')
webshot('/Users/charleneramos/Documents/Git/econ250project/output/summary_mean_aid_region.html', '/Users/charleneramos/Documents/Git/econ250project/output/summary_mean_aid_region.png',
selector = "table",      # crops tightly to the table
zoom = 2,                # higher resolution
vwidth = 2000,           # width of the browser window
vheight = 3000           # height — increase if your table is tall
)
rmarkdown::render(
"/Users/charleneramos/Documents/Git/econ250project/code/vsp_draft.Rmd",
output_format = "pdf_document",
output_dir = "/Users/charleneramos/Documents/Git/econ250project/output/"
)
\begin{table}[!htbp]
\begin{table}[!htbp]
rmarkdown::render(
"/Users/charleneramos/Documents/Git/econ250project/code/vsp_draft.Rmd",
output_format = "pdf_document",
output_dir = "/Users/charleneramos/Documents/Git/econ250project/output/"
)
# install.packages(c("kableExtra","knitr","rmarkdown","tidyverse","tinytex","webshot2"))
# tinytex::install_tinytex()
# ------------------------------- INSTRUCTIONS ------------------------------- #
# 1. Uncomment R chunk labeled data_aid. This cleans and analyzes the
# international aid data. When finish, comment this chunk out again. The PDF
# file won't render otherwise.
# 2. Run R chunk labeled render to generate the PDF table.
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
source('code/aid.R')
library(here)
source(paste0(here,'code/aid.R'))
source(here("code", "aid.R"))
source(here("code", "aid.R"))
library(here)
source(here("code", "aid.R"))
rmarkdown::render(
"/Users/charleneramos/Documents/Git/econ250project/code/vsp_draft.Rmd",
output_format = "pdf_document",
output_dir = "/Users/charleneramos/Documents/Git/econ250project/output/"
)
rmarkdown::render(
"/Users/charleneramos/Documents/Git/econ250project/code/vsp_draft.Rmd",
output_format = "pdf_document",
output_dir = "/Users/charleneramos/Documents/Git/econ250project/output/"
)
rmarkdown::render(
"/Users/charleneramos/Documents/Git/econ250project/code/vsp_draft.Rmd",
output_format = "pdf_document",
output_dir = "/Users/charleneramos/Documents/Git/econ250project/output/"
)
rmarkdown::render(
"/Users/charleneramos/Documents/Git/econ250project/code/vsp_draft.Rmd",
output_format = "pdf_document",
output_dir = "/Users/charleneramos/Documents/Git/econ250project/output/"
)
